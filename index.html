<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Venge.io Modding Site</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Venge.io Modding Site</h1>

        <div class="file-upload">
            <label for="zipFileInput" class="custom-file-upload">
                Upload Venge.io Client/Game Files (ZIP)
            </label>
            <input type="file" id="zipFileInput" accept=".zip">
            <span id="fileNameDisplay">No file chosen</span>
            <button id="loadZipButton">Load Files</button>
        </div>

        <div class="loader hidden" id="loader">
            <div class="spinner"></div>
            <p id="loaderText">Loading...</p>
        </div>

        <div id="assetManagement" class="hidden">
            <div class="controls">
                <button id="exportModButton">Export Mod</button>
                <button id="saveSessionButton">Save Session</button>
                <button id="loadSessionButton">Load Session</button>
                <button id="clearAllButton">Clear All</button>
                <button id="selectAllButton">Select All</button>
                <button id="deselectAllButton">Deselect All</button>
                <button id="toggleExclusionButton">Toggle Exclusion</button>
                <span id="selectedCount">0 selected</span>
            </div>
            <div id="assetList" class="asset-list">
                </div>
        </div>
    </div>

    <div id="replaceModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Replace Asset</h2>
            <div id="modalAssetInfo"></div>
            <input type="file" id="replaceFileInput" accept="image/*, audio/*">
            <label for="replaceFileInput" class="custom-file-upload">
                Choose Replacement File
            </label>
            <span id="replaceFileNameDisplay">No file chosen</span>
            
            <div id="imageEditControls" class="hidden">
                <h3>Image Adjustments</h3>
                <div class="control-group">
                    <label for="brightnessSlider">Brightness:</label>
                    <input type="range" id="brightnessSlider" min="0" max="200" value="100">
                    <span id="brightnessValue">100%</span>
                </div>
                <div class="control-group">
                    <label for="contrastSlider">Contrast:</label>
                    <input type="range" id="contrastSlider" min="0" max="200" value="100">
                    <span id="contrastValue">100%</span>
                </div>
                <div class="control-group">
                    <label for="saturationSlider">Saturation:</label>
                    <input type="range" id="saturationSlider" min="0" max="200" value="100">
                    <span id="saturationValue">100%</span>
                </div>
                <div class="control-group">
                    <label for="colorFillPicker">Color Fill:</label>
                    <input type="color" id="colorFillPicker" value="#ffffff">
                </div>
                <button id="applyEditsButton">Apply Edits</button>
            </div>

            <div id="audioEditControls" class="hidden">
                <h3>Audio Adjustments (Coming Soon)</h3>
                <p>Advanced audio editing is not yet implemented.</p>
            </div>

            <button id="confirmReplaceButton">Confirm Replacement</button>
        </div>
    </div>

    <div id="exportOptionsModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Export Options</h2>
            <div class="export-type-selection">
                <label>
                    <input type="radio" name="exportFormat" value="zip" checked> Export as ZIP Archive
                </label>
                <label>
                    <input type="radio" name="exportFormat" value="folder"> Export as Uncompressed Folder
                </label>
            </div>
            <div class="export-type-selection">
                <label>
                    <input type="radio" name="exportTarget" value="client" checked> Client Export (for Venge.io client)
                </label>
                <label>
                    <input type="radio" name="exportTarget" value="browser"> Browser Export (download directly)
                </label>
            </div>
            <button id="startExportButton">Start Export</button>
        </div>
    </div>

    <canvas id="imageProcessingCanvas" style="display: none;"></canvas>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

    <script src="utils.js" type="module"></script>
    <script src="fileLoader.js" type="module"></script>
    <script src="exportImport.js" type="module"></script>
    <script src="main.js" type="module"></script>
</body>
</html>